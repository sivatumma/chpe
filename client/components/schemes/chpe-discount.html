
<dom-module id="chpe-discount">
<style type="text/css">
    .discountBox{
        width: 320px;
    }
   .discountButton{
        min-width:30px;
        background: #f4f4f4;
        border:1px solid #ccc;
    }
    .discountButton.active{
        color:#000 !important;
        background: lightgreen !important;
        box-shadow: none;
    }
    .noRightBorder{
        border-right: none !important;
    }
    label{
        float: left;
        line-height:40px;
        margin-right: 10px;
    }
    .btn-group {
      display: inline-block;
      vertical-align: middle;
      float: left;
      margin:0px 20px 0px 0px;
    }
    .btn-group > paper-button {
      float: left;
      margin: 0px;
     border-radius: 0px !important;

    }
    .discountInput{
        width:35%;
        display: inline-block;
        margin: 0;
    }
</style>
    <template>
        <div class="discountBox"  id="discountToggle" layout horizontal>
            <div class="btn-group">
                <label>Discount Type</label>
                <paper-button type="button" class="discountButton noRightBorder active" value="{{dataModal.discountType}}"
                on-click="toogleDiscount" id="{{percentageId}}" discount="%">%</paper-button>

                <paper-button type="button" class="discountButton" value="{{dataModal.discountType}}"
                on-click="toogleDiscount" id="{{flatId}}" discount="FLAT">Flat</paper-button>
            </div>
            <div class="discountInput">
                <paper-input no-label-float type="number" max="{{discountLength}}" min="0" required auto-validate pattern="{{discountPattern}}" error-message="Max 999 if Flat ; 10 if %" id="{{discountId}}" 
                value="{{dataModal.discount}}" step="any">
                </paper-input>
            </div>
        </div>
      		
    </template>
    <script>
        Polymer({
            is: 'chpe-discount',
            properties: {
                dataModal: Object,
                discountId:Boolean,
                discountTypeId:String,
                percentageId:String,
                flatId:String

            },
            ready:function(){
                this.behaviour = behaviour;
                console.log(this.discountTypeId);
                this.dataModal.discountType = behaviour.discountType;
                this.discountLength  = 10;
                this.discountPattern = "^([0-10])$";
                this.dataModal.discount = behaviour.defaultDiscount;
            },
            listeners:{
              'discountToggle.onClick':'toogleDiscount'
            },
            toogleDiscount:function(e){
                    console.log(e.target.innerText, this.percentageId.discount);
                    /*var discountType = this.dataModal.discountType;
                    document.querySelector("#"+this.discountTypeId).chUtils.removeClass("active");
                    document.querySelector("#"+this.percentageId).chUtils.removeClass("active");

                if (this.behaviour.discountType == "%") {
                    this.discountLength = 10;
                    this.discountPattern = "^([0-10])$";
                    document.querySelector("#"+this.discountTypeId).chUtils.addClass("active");
                } else {
                    document.querySelector("#"+this.percentageId).chUtils.addClass("active");
                    this.discountLength = 999;
                    this.discountPattern = "^([0-999])$";
                }*/
            }
          
        });
       
        
    </script>
</dom-module>